{% extends "myApp/base.html" %}
{% load static %}

{% block content %}
<div class="container mt-5">

  <h1 class="mb-4 text-primary fw-bold text-center">📊 Dashboard</h1>

  {% if reunion_imminente %}
  <div class="alert alert-warning alert-dismissible fade show shadow-lg rounded" role="alert">
    <strong>⚠️ Réunion imminente!</strong> Avec 
    <a href="{% url 'consulter_reunions' reunion_imminente.stagiaire.id %}" class="fw-semibold text-decoration-underline text-dark">
      {{ reunion_imminente.stagiaire.nom }} {{ reunion_imminente.stagiaire.prenom }}
    </a> 
    à <strong>{{ reunion_imminente.date|date:"H:i d/m/Y" }}</strong>.
    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
  </div>
  {% endif %}

  {% if prochaines_reunions %}
  <div class="card shadow-sm mb-5">
    <div class="card-header bg-primary text-white">
      <h4 class="mb-0">📅 Prochaines Réunions programmées</h4>
    </div>
    <ul class="list-group list-group-flush">
      {% for reunion in prochaines_reunions %}
      <li class="list-group-item d-flex justify-content-between align-items-center py-3 border-bottom hover-shadow rounded-3 mb-2"
          style="transition: box-shadow 0.3s ease, transform 0.3s ease;"
          onmouseover="this.style.boxShadow='0 8px 20px rgba(13,110,253,0.25)'; this.style.transform='translateY(-5px)';"
          onmouseout="this.style.boxShadow='none'; this.style.transform='none';"
      >
        <div>
          <i class="bi bi-person-fill text-primary me-3 fs-4 align-middle"></i>
          <a href="{% url 'consulter_reunions' reunion.stagiaire.id %}" 
             class="text-decoration-none fw-semibold fs-5 text-dark">
            {{ reunion.stagiaire.nom }} {{ reunion.stagiaire.prenom }}
          </a> 
          <span class="text-muted fst-italic ms-2">{{ reunion.titre }}</span>
        </div>
        <div class="d-flex align-items-center">
          <span class="badge bg-info text-dark fs-6 py-2 px-3 rounded-pill shadow-sm">
            {{ reunion.date|date:"d/m/Y H:i" }}
          </span>
          <a href="https://meet.google.com/new" target="_blank" rel="noopener" 
             class="btn btn-sm btn-success ms-3 d-flex align-items-center gap-1 shadow-sm"
             title="Créer une réunion Google Meet">
            <i class="bi bi-camera-video-fill"></i> Meet
          </a>
        </div>
      </li>
      {% endfor %}
    </ul>
  </div>
  {% else %}
  <div class="text-center py-5 text-muted fs-5 fst-italic">
    <i class="bi bi-calendar-x fs-1 mb-3"></i><br />
    Aucune réunion programmée pour le moment.
  </div>
  {% endif %}
</div>

<!-- Bootstrap Icons CDN -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet">

<style>
  /* Custom hover effect for list items */
  .hover-shadow:hover {
    cursor: pointer;
    box-shadow: 0 8px 20px rgba(13,110,253,0.25);
    transform: translateY(-5px);
    transition: box-shadow 0.3s ease, transform 0.3s ease;
  }
</style>
{% endblock %}
