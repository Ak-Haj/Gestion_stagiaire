{% extends "myApp/base.html" %}
{% block content %}
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">

<style>
  body {
    background-color: #f4f6f9;
    font-family: 'Segoe UI', sans-serif;
  }

  .reunion-card {
    background: white;
    border-radius: 16px;
    padding: 30px;
    margin: 30px auto;
    max-width: 1100px;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
  }

  .reunion-card h2 {
    text-align: center;
    font-weight: 600;
    color: #0d6efd;
    margin-bottom: 30px;
  }

  .table thead th {
    background-color: #0d6efd;
    color: white;
    text-align: center;
    vertical-align: middle;
  }

  .table tbody td {
    vertical-align: middle;
    text-align: center;
  }

  .btn-sm {
    padding: 5px 10px;
    font-size: 0.9rem;
  }

  .btn i {
    margin-right: 5px;
  }

  .action-buttons {
    display: flex;
    justify-content: center;
    gap: 8px;
  }

  .empty-row {
    text-align: center;
    font-style: italic;
    color: #888;
  }

  .footer-buttons {
    display: flex;
    justify-content: space-between;
    margin-top: 30px;
  }
</style>

<div class="reunion-card">
  <h2>ðŸ“‹ RÃ©unions de {{ stagiaire.nom }} {{ stagiaire.prenom }}</h2>

  <div class="table-responsive">
    <table class="table table-bordered align-middle">
      <thead>
        <tr>
          <th>Titre</th>
          <th>Date</th>
          <th>Description</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        {% for reunion in reunions %}
        <tr>
          <td>{{ reunion.titre }}</td>
          <td>{{ reunion.date|date:"d/m/Y H:i" }}</td>
          <td>{{ reunion.description }}</td>
          <td>
            <div class="action-buttons">
              <a href="{% url 'modifier_reunion' reunion.id %}" class="btn btn-sm btn-outline-primary">
                <i class="fas fa-edit"></i> Modifier
              </a>
              <form action="{% url 'modifier_reunion' reunion.id %}" method="post" onsubmit="return confirm('Confirmer suppression ?')" style="display:inline;">
                {% csrf_token %}
                <button type="submit" name="supprimer" class="btn btn-sm btn-outline-danger">
                  <i class="fas fa-trash-alt"></i> Supprimer
                </button>
              </form>
            </div>
          </td>
        </tr>
        {% empty %}
        <tr>
          <td colspan="4" class="empty-row">Aucune rÃ©union programmÃ©e.</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>

  <div class="footer-buttons">
    <a href="{% url 'ajouter_reunion' stagiaire.id %}" class="btn btn-success">
      <i class="fas fa-calendar-plus"></i> Ajouter une rÃ©union
    </a>
    <a href="{% url 'stagiaire' %}" class="btn btn-secondary">
      <i class="fas fa-arrow-left"></i> Retour Ã  la liste des stagiaires
    </a>
  </div>
</div>
{% endblock %}
